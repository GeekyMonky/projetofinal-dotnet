@inherits LayoutComponentBase
@using MudBlazor
@* Required *@
<MudThemeProvider />
<MudPopoverProvider />

@* Needed for dialogs *@
<MudDialogProvider />

@* Needed for snackbars *@
<MudSnackbarProvider />

<NavMenu @rendermode="InteractiveServer" />

<div class="page">
    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

<script>
    // Enhanced animation for left crosshair/box only
    function animateLogos() {
        // Left side only - crosshair moves around box
        const crosshairElement = document.getElementById('crosshair-element');
        
        // Positions for movement
        const positions = [
            { x: 0, y: -12 },    // Top
            { x: 8, y: -8 },     // Top-right
            { x: 12, y: 0 },     // Right
            { x: 8, y: 8 },      // Bottom-right
            { x: 0, y: 12 },     // Bottom
            { x: -8, y: 8 },     // Bottom-left
            { x: -12, y: 0 },    // Left
            { x: -8, y: -8 }     // Top-left
        ];
        
        function updatePositions() {
            // Get random position for left element only
            const leftPos = positions[Math.floor(Math.random() * positions.length)];
            
            // Left side - move crosshair around fixed box
            if (crosshairElement) {
                crosshairElement.style.setProperty('--x', `${leftPos.x}px`);
                crosshairElement.style.setProperty('--y', `${leftPos.y}px`);
                console.log(`🎯 Left crosshair moved to: ${leftPos.x}, ${leftPos.y}`);
            }
        }
        
        // Update positions every 2 seconds
        const interval = setInterval(updatePositions, 2000);
        
        // Initial position
        updatePositions();
        
        // Add hover pause functionality for left container only
        const leftContainer = document.querySelector('.ims-logo-container');
        
        let isPaused = false;
        
        function pauseAnimation() {
            isPaused = true;
            console.log('⏸️ Animation paused');
        }
        
        function resumeAnimation() {
            isPaused = false;
            console.log('▶️ Animation resumed');
        }
        
        if (leftContainer) {
            leftContainer.addEventListener('mouseenter', pauseAnimation);
            leftContainer.addEventListener('mouseleave', resumeAnimation);
        }
        
        // Modify interval to respect pause
        clearInterval(interval);
        setInterval(() => {
            if (!isPaused) {
                updatePositions();
            }
        }, 2000);
    }
    
    // Start animation when page loads
    function initAnimation() {
        // Wait a bit for elements to be rendered
        setTimeout(() => {
            const crosshair = document.getElementById('crosshair-element');
            
            if (crosshair) {
                console.log('🚀 Starting logo animation');
                animateLogos();
            } else {
                console.log('❌ Logo elements not found, retrying...');
                // Retry after a short delay
                setTimeout(initAnimation, 500);
            }
        }, 100);
    }
    
    // Start when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initAnimation);
    } else {
        initAnimation();
    }
</script>
